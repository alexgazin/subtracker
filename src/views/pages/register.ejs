<% const regBody = `
<div style="max-width: 400px; margin: 4rem auto;">
    <div class="card">
        <h2 style="margin-bottom: 1.5rem;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
        ${error ? `<p class="error-msg">${error}</p>` : ''}
        <form action="/auth/register" method="POST">
            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" required>
            </div>
            <div class="form-group">
                <label>–ü–∞—Ä–æ–ª—å</label>
                <div class="password-input-wrapper">
                    <input type="password" name="password" id="password" required>
                    <button type="button" class="password-toggle" id="passwordToggle" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">
                        üëÅÔ∏è
                    </button>
                </div>
                <ul class="password-requirements">
                    <li id="req-length" class="requirement">–û—Ç 8 –¥–æ 15 —Å–∏–º–≤–æ–ª–æ–≤</li>
                    <li id="req-case" class="requirement">–ü—Ä–æ–ø–∏—Å–Ω—ã–µ –∏ —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã</li>
                    <li id="req-number" class="requirement">–ú–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞</li>
                    <li id="req-special" class="requirement">–ú–∏–Ω–∏–º—É–º –æ–¥–∏–Ω —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª</li>
                </ul>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1.5rem;">–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É</button>
        </form>
        <p style="margin-top: 1rem; text-align: center; font-size: 0.9rem;">
            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="/login">–í–æ–π—Ç–∏</a>
        </p>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const passwordInput = document.getElementById('password');
        const toggleBtn = document.getElementById('passwordToggle');
        const requirements = {
            length: document.getElementById('req-length'),
            case: document.getElementById('req-case'),
            number: document.getElementById('req-number'),
            special: document.getElementById('req-special')
        };

        // Toggle password visibility
        if (toggleBtn) {
            toggleBtn.addEventListener('click', () => {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                toggleBtn.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
            });
        }

        // Real-time validation
        if (passwordInput) {
            passwordInput.addEventListener('input', () => {
                const val = passwordInput.value;
                
                // Length 8-15
                const isLengthValid = val.length >= 8 && val.length <= 15;
                requirements.length.classList.toggle('valid', isLengthValid);
                
                // Upper and lower case
                const isCaseValid = /[a-z]/.test(val) && /[A-Z]/.test(val);
                requirements.case.classList.toggle('valid', isCaseValid);
                
                // Number
                const isNumberValid = /\\d/.test(val);
                requirements.number.classList.toggle('valid', isNumberValid);
                
                // Special character
                const isSpecialValid = /[!@#$%^&*(),.?":{}|<>]/.test(val);
                requirements.special.classList.toggle('valid', isSpecialValid);
            });
        }
    });
</script>
`; %>
<%- include('../layout', { body: regBody }) %>
