<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SubTracker - MVP</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <header class="main-header">
    <div class="container header-content">
        <div class="left-controls">
            <button id="menu-toggle" class="menu-toggle" aria-label="Open menu" aria-expanded="false">‚ò∞</button>
            <a href="./index.html" class="logo">SubTracker</a>
        </div>
        <nav class="nav">
            
                <!-- For logged in users keep header minimal: nav links are in sidebar -->
                <div class="header-actions">
                    <button class="theme-toggle" id="theme-toggle">üåô</button>
                </div>
            
        </nav>
    </div>
</header>


    <div class="app-layout">
        <aside id="sidebar" class="sidebar" aria-hidden="true" aria-label="Main navigation">
            <div class="sidebar-inner container">
                <div class="sidebar-controls">
                    <button id="sidebar-close" class="sidebar-close" aria-label="Close menu">‚úï</button>
                    <button id="sidebar-pin" class="sidebar-pin" aria-pressed="false" title="–ó–∞–∫—Ä–µ–ø–∏—Ç—å –º–µ–Ω—é">üìå</button>
                </div>
                <nav class="sidebar-nav">
                    
                        <a href="./dashboard.html" class="" ><span class="icon">üè†</span>–î–∞—à–±–æ—Ä–¥</a>
                        <a href="./inbox.html" class="" ><span class="icon">üì•</span>Inbox </a>
                        <a href="./subscriptions.html" class="" ><span class="icon">üìÑ</span>–ü–æ–¥–ø–∏—Å–∫–∏</a>
                        <a href="./app/annual-report.html" class="" ><span class="icon">üìä</span>–û—Ç—á—ë—Ç</a>
                        <a href="./notifications.html" class="" ><span class="icon">üîî</span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è <span class="badge">1</span></a>
                        <a href="./settings.html" class="" ><span class="icon">‚öôÔ∏è</span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                        
                        <a href="./auth/logout.html"><span class="icon">‚Ü™Ô∏è</span>–í—ã—Ö–æ–¥</a>
                    
                </nav>
            </div>
        </aside>

        <div id="page-content" class="page-content container">
            
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SubTracker - MVP</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <header class="main-header">
    <div class="container header-content">
        <div class="left-controls">
            <button id="menu-toggle" class="menu-toggle" aria-label="Open menu" aria-expanded="false">‚ò∞</button>
            <a href="./index.html" class="logo">SubTracker</a>
        </div>
        <nav class="nav">
            
                <!-- For logged in users keep header minimal: nav links are in sidebar -->
                <div class="header-actions">
                    <button class="theme-toggle" id="theme-toggle">üåô</button>
                </div>
            
        </nav>
    </div>
</header>


    <div class="app-layout">
        <aside id="sidebar" class="sidebar" aria-hidden="true" aria-label="Main navigation">
            <div class="sidebar-inner container">
                <div class="sidebar-controls">
                    <button id="sidebar-close" class="sidebar-close" aria-label="Close menu">‚úï</button>
                    <button id="sidebar-pin" class="sidebar-pin" aria-pressed="false" title="–ó–∞–∫—Ä–µ–ø–∏—Ç—å –º–µ–Ω—é">üìå</button>
                </div>
                <nav class="sidebar-nav">
                    
                        <a href="./dashboard.html" class="" ><span class="icon">üè†</span>–î–∞—à–±–æ—Ä–¥</a>
                        <a href="./inbox.html" class="" ><span class="icon">üì•</span>Inbox </a>
                        <a href="./subscriptions.html" class="" ><span class="icon">üìÑ</span>–ü–æ–¥–ø–∏—Å–∫–∏</a>
                        <a href="./app/annual-report.html" class="" ><span class="icon">üìä</span>–û—Ç—á—ë—Ç</a>
                        <a href="./notifications.html" class="" ><span class="icon">üîî</span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è <span class="badge">1</span></a>
                        <a href="./settings.html" class="" ><span class="icon">‚öôÔ∏è</span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                        
                        <a href="./auth/logout.html"><span class="icon">‚Ü™Ô∏è</span>–í—ã—Ö–æ–¥</a>
                    
                </nav>
            </div>
        </aside>

        <div id="page-content" class="page-content container">
            
<div style="max-width: 600px; margin: 0 auto;">
    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
    
    
    

    <div class="card" style="margin-top: 1.5rem;">
        <h3 style="margin-bottom: 1rem;">–í–∞—à –∞–∫–∫–∞—É–Ω—Ç</h3>
        <p><strong>Email:</strong> user@example.com</p>
        <p><strong>–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω:</strong> <span style="color: var(--primary-color); font-weight: bold;">FREE</span></p>
        
        <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);">
            <h4 style="margin-bottom: 1rem;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π</h4>
            
                <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 1rem;">
                    –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ PRO –ø–ª–∞–Ω, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å–æ–∫ –∏ —É–±—Ä–∞—Ç—å —Ä–µ–∫–ª–∞–º—É.
                </p>
                <form action="/app/settings/upgrade-demo" method="POST">
                    <button type="submit" class="btn btn-primary">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å PRO (–î–µ–º–æ)</button>
                </form>
            
        </div>
    </div>

    <div class="card">
        <h3 style="margin-bottom: 1.5rem;">–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
        <form action="/app/settings/change-password" method="POST" id="changePasswordForm">
            <div class="form-group">
                <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <div class="password-input-wrapper">
                    <input type="password" name="newPassword" id="newPassword" required>
                    <button type="button" class="password-toggle" id="toggleNewPassword" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">
                        üëÅÔ∏è
                    </button>
                </div>
                <ul class="password-requirements">
                    <li id="req-length" class="requirement">–û—Ç 8 –¥–æ 15 —Å–∏–º–≤–æ–ª–æ–≤</li>
                    <li id="req-case" class="requirement">–ü—Ä–æ–ø–∏—Å–Ω—ã–µ –∏ —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã</li>
                    <li id="req-number" class="requirement">–ú–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞</li>
                    <li id="req-special" class="requirement">–ú–∏–Ω–∏–º—É–º –æ–¥–∏–Ω —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª</li>
                </ul>
            </div>
            
            <div class="form-group">
                <label>–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <div class="password-input-wrapper">
                    <input type="password" name="confirmPassword" id="confirmPassword" required>
                    <button type="button" class="password-toggle" id="toggleConfirmPassword" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">
                        üëÅÔ∏è
                    </button>
                </div>
                <p id="match-error" class="error-msg" style="display: none; font-size: 0.8rem; margin-top: 0.5rem;">–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç</p>
            </div>

            <button type="submit" id="submitBtn" class="btn btn-primary" style="margin-top: 1rem;">–û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const newPasswordInput = document.getElementById('newPassword');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const submitBtn = document.getElementById('submitBtn');
        const matchError = document.getElementById('match-error');
        
        const toggleNew = document.getElementById('toggleNewPassword');
        const toggleConfirm = document.getElementById('toggleConfirmPassword');

        const requirements = {
            length: document.getElementById('req-length'),
            case: document.getElementById('req-case'),
            number: document.getElementById('req-number'),
            special: document.getElementById('req-special')
        };

        function setupToggle(btn, input) {
            btn.addEventListener('click', () => {
                const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
                input.setAttribute('type', type);
                btn.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
            });
        }

        setupToggle(toggleNew, newPasswordInput);
        setupToggle(toggleConfirm, confirmPasswordInput);

        function validate() {
            const val = newPasswordInput.value;
            const confirmVal = confirmPasswordInput.value;
            
            const isLengthValid = val.length >= 8 && val.length <= 15;
            requirements.length.classList.toggle('valid', isLengthValid);
            
            const isCaseValid = /[a-z]/.test(val) && /[A-Z]/.test(val);
            requirements.case.classList.toggle('valid', isCaseValid);
            
            const isNumberValid = /\d/.test(val);
            requirements.number.classList.toggle('valid', isNumberValid);
            
            const isSpecialValid = /[!@#$%^&*(),.?":{}|<>]/.test(val);
            requirements.special.classList.toggle('valid', isSpecialValid);

            const passwordsMatch = val === confirmVal && val !== '';
            
            if (confirmVal !== '') {
                matchError.style.display = passwordsMatch ? 'none' : 'block';
            } else {
                matchError.style.display = 'none';
            }

            const isAllValid = isLengthValid && isCaseValid && isNumberValid && isSpecialValid && passwordsMatch;
            // –ú—ã –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∞ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, 
            // –Ω–æ –≤–∏–∑—É–∞–ª—å–Ω–æ –º–æ–∂–µ–º –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å.
        }

        newPasswordInput.addEventListener('input', validate);
        confirmPasswordInput.addEventListener('input', validate);

        document.getElementById('changePasswordForm').addEventListener('submit', (e) => {
            const val = newPasswordInput.value;
            const confirmVal = confirmPasswordInput.value;
            const isAllValid = (val.length >= 8 && val.length <= 15) && 
                              (/[a-z]/.test(val) && /[A-Z]/.test(val)) &&
                              (/\d/.test(val)) &&
                              (/[!@#$%^&*(),.?":{}|<>]/.test(val)) &&
                              (val === confirmVal);
            
            if (!isAllValid) {
                e.preventDefault();
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ –ø–∞—Ä–æ–ª–µ');
            }
        });
    });
</script>

        </div>
    </div>

    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2026 SubTracker MVP. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script>
        // Theme toggle
        const toggle = document.getElementById('theme-toggle');
        const currentTheme = localStorage.getItem('theme') || 'light';
        if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            if (toggle) toggle.textContent = '‚òÄÔ∏è';
        }
        if (toggle) toggle.addEventListener('click', () => {
            let theme = document.documentElement.getAttribute('data-theme');
            if (theme === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
                toggle.textContent = 'üåô';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                toggle.textContent = '‚òÄÔ∏è';
            }
        });

        // Sidebar toggle + pin
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');
        const sidebarClose = document.getElementById('sidebar-close');
        const sidebarPin = document.getElementById('sidebar-pin');
        const pageContent = document.getElementById('page-content');

        const SIDEBAR_PIN_KEY = 'sidebarPinned';

        function applyPinnedState() {
            try {
                const pinned = localStorage.getItem(SIDEBAR_PIN_KEY) === 'true';
                if (pinned && window.innerWidth >= 900) {
                    sidebar.classList.add('pinned');
                    sidebar.classList.add('open');
                    sidebar.setAttribute('aria-hidden', 'false');
                    document.body.classList.add('sidebar-pinned');
                    if (sidebarPin) sidebarPin.setAttribute('aria-pressed', 'true');
                } else {
                    sidebar.classList.remove('pinned');
                    if (!sidebar.classList.contains('open')) sidebar.setAttribute('aria-hidden', 'true');
                    document.body.classList.remove('sidebar-pinned');
                    if (sidebarPin) sidebarPin.setAttribute('aria-pressed', 'false');
                }
            } catch (e) { console.error(e); }
        }

        function openSidebar() {
            sidebar.classList.add('open');
            sidebar.setAttribute('aria-hidden', 'false');
            document.body.classList.add('no-scroll');
            if (menuToggle) menuToggle.setAttribute('aria-expanded','true');
            const firstLink = sidebar.querySelector('a');
            if (firstLink) firstLink.focus();
        }

        function closeSidebar() {
            // do not close if pinned on desktop
            const pinned = localStorage.getItem(SIDEBAR_PIN_KEY) === 'true';
            if (pinned && window.innerWidth >= 900) return;

            sidebar.classList.remove('open');
            sidebar.setAttribute('aria-hidden', 'true');
            document.body.classList.remove('no-scroll');
            if (menuToggle) menuToggle.setAttribute('aria-expanded','false');
            if (menuToggle) menuToggle.focus();
        }

        function togglePin() {
            const pinned = localStorage.getItem(SIDEBAR_PIN_KEY) === 'true';
            const newVal = !pinned;
            localStorage.setItem(SIDEBAR_PIN_KEY, newVal ? 'true' : 'false');
            applyPinnedState();
        }

        if (menuToggle) menuToggle.addEventListener('click', openSidebar);
        if (sidebarClose) sidebarClose.addEventListener('click', closeSidebar);
        if (sidebarPin) sidebarPin.addEventListener('click', togglePin);

        // close on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && sidebar.classList.contains('open')) closeSidebar();
        });

        // click outside to close (on overlays)
        pageContent && pageContent.addEventListener('click', (e) => {
            if (sidebar.classList.contains('open') && !sidebar.classList.contains('pinned')) closeSidebar();
        });

        // on resize apply pinned state (if pinned becomes irrelevant on small screens)
        window.addEventListener('resize', applyPinnedState);

        // initial apply
        applyPinnedState();
    </script>
</body>
</html>


        </div>
    </div>

    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2026 SubTracker MVP. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script>
        // Theme toggle
        const toggle = document.getElementById('theme-toggle');
        const currentTheme = localStorage.getItem('theme') || 'light';
        if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            if (toggle) toggle.textContent = '‚òÄÔ∏è';
        }
        if (toggle) toggle.addEventListener('click', () => {
            let theme = document.documentElement.getAttribute('data-theme');
            if (theme === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
                toggle.textContent = 'üåô';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                toggle.textContent = '‚òÄÔ∏è';
            }
        });

        // Sidebar toggle + pin
        const menuToggle = document.getElementById('menu-toggle');
        const sidebar = document.getElementById('sidebar');
        const sidebarClose = document.getElementById('sidebar-close');
        const sidebarPin = document.getElementById('sidebar-pin');
        const pageContent = document.getElementById('page-content');

        const SIDEBAR_PIN_KEY = 'sidebarPinned';

        function applyPinnedState() {
            try {
                const pinned = localStorage.getItem(SIDEBAR_PIN_KEY) === 'true';
                if (pinned && window.innerWidth >= 900) {
                    sidebar.classList.add('pinned');
                    sidebar.classList.add('open');
                    sidebar.setAttribute('aria-hidden', 'false');
                    document.body.classList.add('sidebar-pinned');
                    if (sidebarPin) sidebarPin.setAttribute('aria-pressed', 'true');
                } else {
                    sidebar.classList.remove('pinned');
                    if (!sidebar.classList.contains('open')) sidebar.setAttribute('aria-hidden', 'true');
                    document.body.classList.remove('sidebar-pinned');
                    if (sidebarPin) sidebarPin.setAttribute('aria-pressed', 'false');
                }
            } catch (e) { console.error(e); }
        }

        function openSidebar() {
            sidebar.classList.add('open');
            sidebar.setAttribute('aria-hidden', 'false');
            document.body.classList.add('no-scroll');
            if (menuToggle) menuToggle.setAttribute('aria-expanded','true');
            const firstLink = sidebar.querySelector('a');
            if (firstLink) firstLink.focus();
        }

        function closeSidebar() {
            // do not close if pinned on desktop
            const pinned = localStorage.getItem(SIDEBAR_PIN_KEY) === 'true';
            if (pinned && window.innerWidth >= 900) return;

            sidebar.classList.remove('open');
            sidebar.setAttribute('aria-hidden', 'true');
            document.body.classList.remove('no-scroll');
            if (menuToggle) menuToggle.setAttribute('aria-expanded','false');
            if (menuToggle) menuToggle.focus();
        }

        function togglePin() {
            const pinned = localStorage.getItem(SIDEBAR_PIN_KEY) === 'true';
            const newVal = !pinned;
            localStorage.setItem(SIDEBAR_PIN_KEY, newVal ? 'true' : 'false');
            applyPinnedState();
        }

        if (menuToggle) menuToggle.addEventListener('click', openSidebar);
        if (sidebarClose) sidebarClose.addEventListener('click', closeSidebar);
        if (sidebarPin) sidebarPin.addEventListener('click', togglePin);

        // close on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && sidebar.classList.contains('open')) closeSidebar();
        });

        // click outside to close (on overlays)
        pageContent && pageContent.addEventListener('click', (e) => {
            if (sidebar.classList.contains('open') && !sidebar.classList.contains('pinned')) closeSidebar();
        });

        // on resize apply pinned state (if pinned becomes irrelevant on small screens)
        window.addEventListener('resize', applyPinnedState);

        // initial apply
        applyPinnedState();
    </script>
</body>
</html>
